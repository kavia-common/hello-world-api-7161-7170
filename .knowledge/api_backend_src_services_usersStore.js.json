{"is_source_file": true, "format": "JavaScript", "description": "This file implements an in-memory user store with functions to create, find, update, and delete users, along with validation and normalization routines. It manages user data with a Map and enforces username uniqueness and role validation.", "external_files": ["../models/user"], "external_methods": ["validateNewUser", "isValidUserRole"], "published": ["createUser", "findByUsername", "updateUser", "deleteUser"], "classes": [], "methods": [{"name": "normalizeForReturn(record)", "description": "Creates a copy of a user record for API responses, keeping passwordHash included.", "scope": "", "scopeKind": ""}, {"name": "createUser(user)", "description": "Creates and stores a new user after validation and ensures username uniqueness.", "scope": "", "scopeKind": ""}, {"name": "findByUsername(username)", "description": "Retrieves a user record by username.", "scope": "", "scopeKind": ""}, {"name": "updateUser(username, patch)", "description": "Updates an existing user's passwordHash or role, enforcing validation rules.", "scope": "", "scopeKind": ""}, {"name": "deleteUser(username)", "description": "Deletes a user by username from the in-memory store.", "scope": "", "scopeKind": ""}], "calls": ["validateNewUser", "isValidUserRole"], "search-terms": ["usersStore", "in-memory user storage", "createUser", "findByUsername", "updateUser", "deleteUser", "validation", "user roles", "username uniqueness"], "state": 2, "file_id": 32, "knowledge_revision": 122, "git_revision": "6a28926681fe2db4c2af1196deeed39e780066b4", "revision_history": [{"120": ""}, {"122": "6a28926681fe2db4c2af1196deeed39e780066b4"}], "ctags": [{"_type": "tag", "name": "createUser", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/usersStore.js", "pattern": "/^  createUser,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "createUser", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/usersStore.js", "pattern": "/^async function createUser(user) {$/", "language": "JavaScript", "kind": "function", "signature": "(user)"}, {"_type": "tag", "name": "deleteUser", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/usersStore.js", "pattern": "/^async function deleteUser(username) {$/", "language": "JavaScript", "kind": "function", "signature": "(username)"}, {"_type": "tag", "name": "findByUsername", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/usersStore.js", "pattern": "/^async function findByUsername(username) {$/", "language": "JavaScript", "kind": "function", "signature": "(username)"}, {"_type": "tag", "name": "normalizeForReturn", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/usersStore.js", "pattern": "/^function normalizeForReturn(record) {$/", "language": "JavaScript", "kind": "function", "signature": "(record)"}, {"_type": "tag", "name": "updateUser", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/usersStore.js", "pattern": "/^async function updateUser(username, patch) {$/", "language": "JavaScript", "kind": "function", "signature": "(username, patch)"}, {"_type": "tag", "name": "username", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/usersStore.js", "pattern": "/^    username,$/", "language": "JavaScript", "kind": "field", "scope": "createUser.record", "scopeKind": "class"}, {"_type": "tag", "name": "usersByUsername", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/usersStore.js", "pattern": "/^const usersByUsername = new Map();$/", "language": "JavaScript", "kind": "constant"}], "hash": "7f4d2a2cb2488aa070d5f60080d13e06", "format-version": 4, "code-base-name": "api_backend", "filename": "api_backend/src/services/usersStore.js", "fields": [{"name": "createUser,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}, {"name": "username,", "scope": "createUser.record", "scopeKind": "class", "description": "unavailable"}]}
{"is_source_file": true, "format": "JavaScript", "description": "This file defines the InstructionsController class that manages CRUD operations for instructions, including creation, listing, retrieval, full replacement, partial updates, and deletion. It uses an external instructionsStore module for data persistence and contains validation logic for instruction data. The file also exports a singleton instance of the controller with route aliases.", "external_files": ["../services/instructionsStore"], "external_methods": ["instructionsStore.createInstruction", "instructionsStore.listInstructions", "instructionsStore.getInstructionById", "instructionsStore.replaceInstruction", "instructionsStore.patchInstruction", "instructionsStore.deleteInstruction"], "published": ["listInstructions", "getInstructionById", "createInstruction", "replaceInstruction", "patchInstruction", "deleteInstruction"], "classes": [{"name": "InstructionsController", "description": "Controller class managing instruction CRUD operations including validation and response handling."}], "methods": [{"name": "create(req, res)", "description": "Creates a new instruction with validation and error handling, calls instructionsStore.createInstruction, and responds with success or error.", "scope": "InstructionsController", "scopeKind": "class"}, {"name": "list(req, res)", "description": "Lists all instructions by calling instructionsStore.listInstructions, returns the data with count.", "scope": "InstructionsController", "scopeKind": "class"}, {"name": "getById(req, res)", "description": "Retrieves a single instruction by id from instructionsStore.getInstructionById, returns 404 if not found.", "scope": "InstructionsController", "scopeKind": "class"}, {"name": "replace(req, res)", "description": "Replaces an entire instruction record after validation, using instructionsStore.replaceInstruction, with appropriate error handling.", "scope": "InstructionsController", "scopeKind": "class"}, {"name": "patch(req, res)", "description": "Partially updates an instruction record; validates input, manages optional fields, calls instructionsStore.patchInstruction.", "scope": "InstructionsController", "scopeKind": "class"}, {"name": "delete(req, res)", "description": "Deletes an instruction by id with instructionsStore.deleteInstruction, responds with 204 or 404.", "scope": "InstructionsController", "scopeKind": "class"}, {"name": "asOptionalString(value)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "isNonEmptyString(value)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "parseIdFromPath(value)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "validateIdMatch(pathId, bodyId, errors)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["instructionsStore.createInstruction", "instructionsStore.listInstructions", "instructionsStore.getInstructionById", "instructionsStore.replaceInstruction", "instructionsStore.patchInstruction", "instructionsStore.deleteInstruction"], "search-terms": ["InstructionsController", "instructionsStore", "createInstruction", "listInstructions", "getInstructionById", "replaceInstruction", "patchInstruction", "deleteInstruction", "instructions.js"], "state": 2, "file_id": 38, "knowledge_revision": 200, "git_revision": "880c35dd1d428b90170f6feb4db6db4a22aa0785", "revision_history": [{"150": "3d28793d1ccc4488ca7589e184a982fead9f0c05"}, {"200": "880c35dd1d428b90170f6feb4db6db4a22aa0785"}], "ctags": [{"_type": "tag", "name": "InstructionsController", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/instructions.js", "pattern": "/^class InstructionsController {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "asOptionalString", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/instructions.js", "pattern": "/^function asOptionalString(value) {$/", "language": "JavaScript", "kind": "function", "signature": "(value)"}, {"_type": "tag", "name": "category", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/instructions.js", "pattern": "/^      category: isNonEmptyString(category) ? category.trim() : undefined,$/", "language": "JavaScript", "kind": "property", "scope": "InstructionsController.create.record", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/instructions.js", "pattern": "/^      content,$/", "language": "JavaScript", "kind": "field", "scope": "InstructionsController.replace.replacement", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/instructions.js", "pattern": "/^      content: content,$/", "language": "JavaScript", "kind": "property", "scope": "InstructionsController.create.record", "scopeKind": "class"}, {"_type": "tag", "name": "controller", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/instructions.js", "pattern": "/^const controller = new InstructionsController();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/instructions.js", "pattern": "/^  async create(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "InstructionsController", "scopeKind": "class"}, {"_type": "tag", "name": "delete", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/instructions.js", "pattern": "/^  async delete(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "InstructionsController", "scopeKind": "class"}, {"_type": "tag", "name": "getById", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/instructions.js", "pattern": "/^  async getById(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "InstructionsController", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/instructions.js", "pattern": "/^      id: id.trim(),$/", "language": "JavaScript", "kind": "property", "scope": "InstructionsController.create.record", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/instructions.js", "pattern": "/^      id: pathId,$/", "language": "JavaScript", "kind": "property", "scope": "InstructionsController.replace.replacement", "scopeKind": "class"}, {"_type": "tag", "name": "instructionsStore", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/instructions.js", "pattern": "/^const instructionsStore = require('..\\/services\\/instructionsStore');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "isNonEmptyString", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/instructions.js", "pattern": "/^function isNonEmptyString(value) {$/", "language": "JavaScript", "kind": "function", "signature": "(value)"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/instructions.js", "pattern": "/^  async list(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "InstructionsController", "scopeKind": "class"}, {"_type": "tag", "name": "parseIdFromPath", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/instructions.js", "pattern": "/^function parseIdFromPath(value) {$/", "language": "JavaScript", "kind": "function", "signature": "(value)"}, {"_type": "tag", "name": "patch", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/instructions.js", "pattern": "/^  async patch(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "InstructionsController", "scopeKind": "class"}, {"_type": "tag", "name": "record", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/instructions.js", "pattern": "/^    const record = {$/", "language": "JavaScript", "kind": "class", "scope": "InstructionsController.create", "scopeKind": "class"}, {"_type": "tag", "name": "replace", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/instructions.js", "pattern": "/^  async replace(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "InstructionsController", "scopeKind": "class"}, {"_type": "tag", "name": "replacement", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/instructions.js", "pattern": "/^    const replacement = {$/", "language": "JavaScript", "kind": "class", "scope": "InstructionsController.replace", "scopeKind": "class"}, {"_type": "tag", "name": "slug", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/instructions.js", "pattern": "/^      slug: isNonEmptyString(slug) ? slug.trim() : undefined,$/", "language": "JavaScript", "kind": "property", "scope": "InstructionsController.create.record", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/instructions.js", "pattern": "/^      title: title.trim(),$/", "language": "JavaScript", "kind": "property", "scope": "InstructionsController.create.record", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/instructions.js", "pattern": "/^      title: title.trim(),$/", "language": "JavaScript", "kind": "property", "scope": "InstructionsController.replace.replacement", "scopeKind": "class"}, {"_type": "tag", "name": "validateIdMatch", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/instructions.js", "pattern": "/^function validateIdMatch(pathId, bodyId, errors) {$/", "language": "JavaScript", "kind": "function", "signature": "(pathId, bodyId, errors)"}], "hash": "83cd9c2cb34de046964d978b27baeb8f", "format-version": 4, "code-base-name": "api_backend", "filename": "api_backend/src/controllers/instructions.js", "fields": [{"name": "category: isNonEmptyString(category) ? category.trim() : undefined,", "scope": "InstructionsController.create.record", "scopeKind": "class", "description": "unavailable"}, {"name": "content,", "scope": "InstructionsController.replace.replacement", "scopeKind": "class", "description": "unavailable"}, {"name": "content: content,", "scope": "InstructionsController.create.record", "scopeKind": "class", "description": "unavailable"}, {"name": "id: id.trim(),", "scope": "InstructionsController.create.record", "scopeKind": "class", "description": "unavailable"}, {"name": "id: pathId,", "scope": "InstructionsController.replace.replacement", "scopeKind": "class", "description": "unavailable"}, {"name": "slug: isNonEmptyString(slug) ? slug.trim() : undefined,", "scope": "InstructionsController.create.record", "scopeKind": "class", "description": "unavailable"}, {"name": "title: title.trim(),", "scope": "InstructionsController.create.record", "scopeKind": "class", "description": "unavailable"}]}
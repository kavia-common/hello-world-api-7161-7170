{"is_source_file": true, "format": "JavaScript", "description": "This file defines the AnnouncementsController class for managing announcement records via an Express.js API. It includes methods for listing, retrieving, creating, replacing, patching, and deleting announcements, with detailed validation and error handling. The file also references external services and constants.", "external_files": ["../services/announcementsStore"], "external_methods": ["announcementsStore.listAnnouncements", "announcementsStore.getAnnouncementById", "announcementsStore.createAnnouncement", "announcementsStore.replaceAnnouncement", "announcementsStore.patchAnnouncement", "announcementsStore.deleteAnnouncement"], "published": ["AnnouncementsController"], "classes": [{"name": "AnnouncementsController", "description": "Controller class providing API methods for managing announcements, including listing, retrieving by id, creating, replacing, patching, and deleting announcements."}], "methods": [{"name": "list(req, res)", "description": "Returns a list of all stored announcements.", "scope": "AnnouncementsController", "scopeKind": "class"}, {"name": "getById(req, res)", "description": "Retrieves a single announcement by its id, responding with 404 if not found.", "scope": "AnnouncementsController", "scopeKind": "class"}, {"name": "create(req, res)", "description": "Creates a new announcement record with validation and optional fields, generating an id if not provided.", "scope": "AnnouncementsController", "scopeKind": "class"}, {"name": "replace(req, res)", "description": "Replaces a full announcement record identified by the path id with validation.", "scope": "AnnouncementsController", "scopeKind": "class"}, {"name": "patch(req, res)", "description": "Partially updates an existing announcement record, validating provided fields and ensuring date consistency.", "scope": "AnnouncementsController", "scopeKind": "class"}, {"name": "delete(req, res)", "description": "Removes an announcement record by id, returning 204 on success.", "scope": "AnnouncementsController", "scopeKind": "class"}, {"name": "asOptionalBoolean(value)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "asOptionalIsoDateString(value)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "asOptionalString(value)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "isNonEmptyString(value)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "parseIdFromPath(value)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "validateIdMatch(pathId, bodyId, errors)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["announcementsStore.listAnnouncements", "announcementsStore.getAnnouncementById", "announcementsStore.createAnnouncement", "announcementsStore.replaceAnnouncement", "announcementsStore.patchAnnouncement", "announcementsStore.deleteAnnouncement"], "search-terms": ["announcements.js", "AnnouncementsController", "listAnnouncements", "getAnnouncementById", "createAnnouncement", "replaceAnnouncement", "patchAnnouncement", "deleteAnnouncement", "ISO date string validation", "announcement store"], "state": 2, "file_id": 40, "knowledge_revision": 201, "git_revision": "880c35dd1d428b90170f6feb4db6db4a22aa0785", "revision_history": [{"156": "06c72ee76f430f86574804c4a36529ec57b00899"}, {"201": "880c35dd1d428b90170f6feb4db6db4a22aa0785"}], "ctags": [{"_type": "tag", "name": "AnnouncementsController", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/announcements.js", "pattern": "/^class AnnouncementsController {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "announcementsStore", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/announcements.js", "pattern": "/^const announcementsStore = require('..\\/services\\/announcementsStore');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "asOptionalBoolean", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/announcements.js", "pattern": "/^function asOptionalBoolean(value) {$/", "language": "JavaScript", "kind": "function", "signature": "(value)"}, {"_type": "tag", "name": "asOptionalIsoDateString", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/announcements.js", "pattern": "/^function asOptionalIsoDateString(value) {$/", "language": "JavaScript", "kind": "function", "signature": "(value)"}, {"_type": "tag", "name": "asOptionalString", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/announcements.js", "pattern": "/^function asOptionalString(value) {$/", "language": "JavaScript", "kind": "function", "signature": "(value)"}, {"_type": "tag", "name": "controller", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/announcements.js", "pattern": "/^const controller = new AnnouncementsController();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/announcements.js", "pattern": "/^  async create(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "AnnouncementsController", "scopeKind": "class"}, {"_type": "tag", "name": "crypto", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/announcements.js", "pattern": "/^const crypto = require('crypto');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "delete", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/announcements.js", "pattern": "/^  async delete(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "AnnouncementsController", "scopeKind": "class"}, {"_type": "tag", "name": "getById", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/announcements.js", "pattern": "/^  async getById(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "AnnouncementsController", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/announcements.js", "pattern": "/^      id: effectiveId,$/", "language": "JavaScript", "kind": "property", "scope": "AnnouncementsController.create.record", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/announcements.js", "pattern": "/^      id: pathId,$/", "language": "JavaScript", "kind": "property", "scope": "AnnouncementsController.replace.replacement", "scopeKind": "class"}, {"_type": "tag", "name": "isNonEmptyString", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/announcements.js", "pattern": "/^function isNonEmptyString(value) {$/", "language": "JavaScript", "kind": "function", "signature": "(value)"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/announcements.js", "pattern": "/^  async list(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "AnnouncementsController", "scopeKind": "class"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/announcements.js", "pattern": "/^      message,$/", "language": "JavaScript", "kind": "field", "scope": "AnnouncementsController.create.record", "scopeKind": "class"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/announcements.js", "pattern": "/^      message,$/", "language": "JavaScript", "kind": "field", "scope": "AnnouncementsController.replace.replacement", "scopeKind": "class"}, {"_type": "tag", "name": "parseIdFromPath", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/announcements.js", "pattern": "/^function parseIdFromPath(value) {$/", "language": "JavaScript", "kind": "function", "signature": "(value)"}, {"_type": "tag", "name": "patch", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/announcements.js", "pattern": "/^  async patch(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "AnnouncementsController", "scopeKind": "class"}, {"_type": "tag", "name": "record", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/announcements.js", "pattern": "/^    const record = {$/", "language": "JavaScript", "kind": "class", "scope": "AnnouncementsController.create", "scopeKind": "class"}, {"_type": "tag", "name": "replace", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/announcements.js", "pattern": "/^  async replace(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "AnnouncementsController", "scopeKind": "class"}, {"_type": "tag", "name": "replacement", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/announcements.js", "pattern": "/^    const replacement = {$/", "language": "JavaScript", "kind": "class", "scope": "AnnouncementsController.replace", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/announcements.js", "pattern": "/^      title: title.trim(),$/", "language": "JavaScript", "kind": "property", "scope": "AnnouncementsController.create.record", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/announcements.js", "pattern": "/^      title: title.trim(),$/", "language": "JavaScript", "kind": "property", "scope": "AnnouncementsController.replace.replacement", "scopeKind": "class"}, {"_type": "tag", "name": "validateIdMatch", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/announcements.js", "pattern": "/^function validateIdMatch(pathId, bodyId, errors) {$/", "language": "JavaScript", "kind": "function", "signature": "(pathId, bodyId, errors)"}], "hash": "a4fe73b93b9d7573fb0e573d903d233b", "format-version": 4, "code-base-name": "api_backend", "filename": "api_backend/src/controllers/announcements.js", "fields": [{"name": "id: effectiveId,", "scope": "AnnouncementsController.create.record", "scopeKind": "class", "description": "unavailable"}, {"name": "id: pathId,", "scope": "AnnouncementsController.replace.replacement", "scopeKind": "class", "description": "unavailable"}, {"name": "message,", "scope": "AnnouncementsController.create.record", "scopeKind": "class", "description": "unavailable"}, {"name": "title: title.trim(),", "scope": "AnnouncementsController.create.record", "scopeKind": "class", "description": "unavailable"}]}
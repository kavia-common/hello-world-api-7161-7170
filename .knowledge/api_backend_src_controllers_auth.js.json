{"is_source_file": true, "format": "JavaScript", "description": "This file implements authentication-related route handlers for a Node.js/Express backend, specifically for user signup and login. It includes input validation, password hashing with bcrypt, user creation via a user store service, and JWT token issuance for authenticated sessions.", "external_files": ["../services/usersStore", "../models/user", "../utils/jwt", "express"], "external_methods": ["isValidUserRole", "signAuthToken", "bcrypt.hash", "bcrypt.compare", "usersStore.createUser", "usersStore.findByUsername"], "published": ["signup", "login"], "classes": [], "methods": [{"name": "signup(req, res)", "description": "Handles user registration by validating input, hashing the password, and creating a new user record. Returns user info on success or appropriate error status codes.", "scope": "", "scopeKind": ""}, {"name": "login(req, res)", "description": "Handles user authentication by validating input, verifying credentials with bcrypt, and issuing a JWT token on success. Returns token and user info, or error responses.", "scope": "", "scopeKind": ""}], "calls": ["bcrypt.hash", "usersStore.createUser", "usersStore.findByUsername", "bcrypt.compare", "signAuthToken"], "search-terms": ["auth.js", "signup", "login", "bcrypt", "JWT", "usersStore"], "state": 2, "file_id": 33, "knowledge_revision": 207, "git_revision": "202ca96edb0abd498f6b34caad2d77ad4826ab5f", "revision_history": [{"126": "0b243d75f96ffcc9d143a82f0e1f7feb4b0a308f"}, {"128": "3ae173fa283086602d97d864c9da3d9036436497"}, {"207": "202ca96edb0abd498f6b34caad2d77ad4826ab5f"}], "ctags": [{"_type": "tag", "name": "ALLOWED_ROLES_MESSAGE", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/auth.js", "pattern": "/^const ALLOWED_ROLES_MESSAGE = 'role must be one of [\\\\'admin\\\\',\\\\'manager\\\\',\\\\'user\\\\'].';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "INVALID_CREDENTIALS_MESSAGE", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/auth.js", "pattern": "/^const INVALID_CREDENTIALS_MESSAGE = 'Invalid username or password.';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "bcrypt", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/auth.js", "pattern": "/^const bcrypt = require('bcrypt');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/auth.js", "pattern": "/^async function login(req, res) {$/", "language": "JavaScript", "kind": "function", "signature": "(req, res)"}, {"_type": "tag", "name": "role", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/auth.js", "pattern": "/^    const userSummary = { username: user.username, role: user.role };$/", "language": "JavaScript", "kind": "property", "scope": "login.userSummary", "scopeKind": "class"}, {"_type": "tag", "name": "signup", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/auth.js", "pattern": "/^  signup,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "signup", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/auth.js", "pattern": "/^async function signup(req, res) {$/", "language": "JavaScript", "kind": "function", "signature": "(req, res)"}, {"_type": "tag", "name": "userSummary", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/auth.js", "pattern": "/^    const userSummary = { username: user.username, role: user.role };$/", "language": "JavaScript", "kind": "class", "scope": "login", "scopeKind": "class"}, {"_type": "tag", "name": "username", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/auth.js", "pattern": "/^    const userSummary = { username: user.username, role: user.role };$/", "language": "JavaScript", "kind": "property", "scope": "login.userSummary", "scopeKind": "class"}, {"_type": "tag", "name": "usersStore", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/auth.js", "pattern": "/^const usersStore = require('..\\/services\\/usersStore');$/", "language": "JavaScript", "kind": "constant"}], "hash": "34445749227f5304dbffdde121f0b8ea", "format-version": 4, "code-base-name": "api_backend", "filename": "api_backend/src/controllers/auth.js", "fields": [{"name": "const userSummary = { username: user.username, role: user.role };", "scope": "login.userSummary", "scopeKind": "class", "description": "unavailable"}, {"name": "signup,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}]}
{"is_source_file": true, "format": "JavaScript", "description": "This file contains Express.js route handler functions for user authentication, including user sign-up and login, with password hashing using bcrypt, user data validation, and JWT token issuance.", "external_files": ["../services/usersStore", "../models/user", "../utils/jwt"], "external_methods": ["isValidUserRole", "signAuthToken"], "published": ["signup", "login"], "classes": [], "methods": [{"name": "signup(req, res)", "description": "Handles user registration by validating input, hashing the password with bcrypt, saving the user in the store, and returning minimal user info upon success.", "scope": "", "scopeKind": ""}, {"name": "login(req, res)", "description": "Authenticates a user by validating credentials, comparing passwords with bcrypt, and issuing a JWT token on success.", "scope": "", "scopeKind": ""}], "calls": ["bcrypt.hash", "usersStore.createUser", "bcrypt.compare", "usersStore.findByUsername", "signAuthToken"], "search-terms": ["auth controllers", "signup", "login", "JWT", "bcrypt", "Express routes"], "state": 2, "file_id": 33, "knowledge_revision": 128, "git_revision": "3ae173fa283086602d97d864c9da3d9036436497", "revision_history": [{"126": "0b243d75f96ffcc9d143a82f0e1f7feb4b0a308f"}, {"128": "3ae173fa283086602d97d864c9da3d9036436497"}], "ctags": [{"_type": "tag", "name": "ALLOWED_ROLES_MESSAGE", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/auth.js", "pattern": "/^const ALLOWED_ROLES_MESSAGE = 'role must be one of [\\\\'admin\\\\',\\\\'manager\\\\',\\\\'user\\\\'].';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "INVALID_CREDENTIALS_MESSAGE", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/auth.js", "pattern": "/^const INVALID_CREDENTIALS_MESSAGE = 'Invalid username or password.';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "bcrypt", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/auth.js", "pattern": "/^const bcrypt = require('bcrypt');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/auth.js", "pattern": "/^async function login(req, res) {$/", "language": "JavaScript", "kind": "function", "signature": "(req, res)"}, {"_type": "tag", "name": "role", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/auth.js", "pattern": "/^    const userSummary = { username: user.username, role: user.role };$/", "language": "JavaScript", "kind": "property", "scope": "login.userSummary", "scopeKind": "class"}, {"_type": "tag", "name": "signup", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/auth.js", "pattern": "/^  signup,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "signup", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/auth.js", "pattern": "/^async function signup(req, res) {$/", "language": "JavaScript", "kind": "function", "signature": "(req, res)"}, {"_type": "tag", "name": "userSummary", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/auth.js", "pattern": "/^    const userSummary = { username: user.username, role: user.role };$/", "language": "JavaScript", "kind": "class", "scope": "login", "scopeKind": "class"}, {"_type": "tag", "name": "username", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/auth.js", "pattern": "/^    const userSummary = { username: user.username, role: user.role };$/", "language": "JavaScript", "kind": "property", "scope": "login.userSummary", "scopeKind": "class"}, {"_type": "tag", "name": "usersStore", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/controllers/auth.js", "pattern": "/^const usersStore = require('..\\/services\\/usersStore');$/", "language": "JavaScript", "kind": "constant"}], "hash": "e6ef23d7a80d83b4f271ee85f6fc0cd5", "format-version": 4, "code-base-name": "api_backend", "filename": "api_backend/src/controllers/auth.js", "fields": [{"name": "const userSummary = { username: user.username, role: user.role };", "scope": "login.userSummary", "scopeKind": "class", "description": "unavailable"}, {"name": "signup,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}]}
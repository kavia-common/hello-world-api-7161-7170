{"is_source_file": true, "format": "JavaScript", "description": "This file implements an in-memory storage module for managing announcements. It provides functions to create, list, retrieve, replace, patch, delete, and clear announcements, including validation logic and normalization of date fields for API responses.", "external_files": [], "external_methods": [], "published": ["ALLOWED_PRIORITIES", "createAnnouncement", "listAnnouncements", "getAnnouncementById", "replaceAnnouncement", "patchAnnouncement", "deleteAnnouncement", "clearAll"], "classes": [], "methods": [{"name": "normalizeForApi(announcement)", "description": "Creates a shallow clone of an announcement object, ensuring that timestamp fields are formatted as ISO strings.", "scope": "", "scopeKind": ""}, {"name": "isNonEmptyString(value)", "description": "Checks if a given value is a non-empty string.", "scope": "", "scopeKind": ""}, {"name": "isOptionalIsoDateString(value)", "description": "Validates that a value is either undefined/null/empty or a valid ISO date string.", "scope": "", "scopeKind": ""}, {"name": "parseIsoDate(value)", "description": "Parses an ISO date string into a Date object.", "scope": "", "scopeKind": ""}, {"name": "validateAnnouncement(candidate, isPatch)", "description": "Validates the properties of an announcement object against store-level constraints.", "scope": "", "scopeKind": ""}, {"name": "createAnnouncement(announcement)", "description": "Creates and stores a new announcement, ensuring unique id and validation.", "scope": "", "scopeKind": ""}, {"name": "listAnnouncements()", "description": "Returns all stored announcements as an array.", "scope": "", "scopeKind": ""}, {"name": "getAnnouncementById(id)", "description": "Retrieves a specific announcement by id.", "scope": "", "scopeKind": ""}, {"name": "replaceAnnouncement(id, replacement)", "description": "Replaces an existing announcement by id, preserving the original creation timestamp.", "scope": "", "scopeKind": ""}, {"name": "patchAnnouncement(id, patch)", "description": "Applies a partial update to an existing announcement by id.", "scope": "", "scopeKind": ""}, {"name": "deleteAnnouncement(id)", "description": "Deletes an announcement by id.", "scope": "", "scopeKind": ""}, {"name": "clearAll()", "description": "Removes all announcements from the store.", "scope": "", "scopeKind": ""}], "calls": ["normalizeForApi", "isNonEmptyString", "isOptionalIsoDateString", "parseIsoDate", "validateAnnouncement"], "search-terms": ["announcements", "in-memory store", "validation", "ISO date", "announcement management"], "state": 2, "file_id": 39, "knowledge_revision": 219, "git_revision": "70692f10e6093a6b89251d9427a5d19e2bbbdf73", "revision_history": [{"154": "06c72ee76f430f86574804c4a36529ec57b00899"}, {"219": "70692f10e6093a6b89251d9427a5d19e2bbbdf73"}], "ctags": [{"_type": "tag", "name": "ALLOWED_PRIORITIES", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^  ALLOWED_PRIORITIES,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "ALLOWED_PRIORITIES", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^const ALLOWED_PRIORITIES = new Set(['low', 'normal', 'high']);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "announcementsById", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^const announcementsById = new Map();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "clearAll", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^async function clearAll() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "createAnnouncement", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^async function createAnnouncement(announcement) {$/", "language": "JavaScript", "kind": "function", "signature": "(announcement)"}, {"_type": "tag", "name": "deleteAnnouncement", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^async function deleteAnnouncement(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "getAnnouncementById", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^async function getAnnouncementById(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "isNonEmptyString", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^function isNonEmptyString(value) {$/", "language": "JavaScript", "kind": "function", "signature": "(value)"}, {"_type": "tag", "name": "isOptionalIsoDateString", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^function isOptionalIsoDateString(value) {$/", "language": "JavaScript", "kind": "function", "signature": "(value)"}, {"_type": "tag", "name": "listAnnouncements", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^async function listAnnouncements() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "normalizeForApi", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^function normalizeForApi(announcement) {$/", "language": "JavaScript", "kind": "function", "signature": "(announcement)"}, {"_type": "tag", "name": "parseIsoDate", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^function parseIsoDate(value) {$/", "language": "JavaScript", "kind": "function", "signature": "(value)"}, {"_type": "tag", "name": "patchAnnouncement", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^async function patchAnnouncement(id, patch) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, patch)"}, {"_type": "tag", "name": "replaceAnnouncement", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^async function replaceAnnouncement(id, replacement) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, replacement)"}, {"_type": "tag", "name": "validateAnnouncement", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^function validateAnnouncement(candidate, isPatch) {$/", "language": "JavaScript", "kind": "function", "signature": "(candidate, isPatch)"}], "hash": "a3d20c7fbc26c742622d071c5d4d8d5a", "format-version": 4, "code-base-name": "api_backend", "filename": "api_backend/src/services/announcementsStore.js", "fields": [{"name": "ALLOWED_PRIORITIES,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}]}
{"is_source_file": true, "format": "JavaScript", "description": "This file implements an in-memory store for 'announcements' with validation, normalization, CRUD operations, and constraints specifically tailored for a Node.js backend. It manages announcement records and ensures data integrity through validation functions before performing operations.", "external_files": [], "external_methods": [], "published": ["ALLOWED_PRIORITIES", "createAnnouncement", "listAnnouncements", "getAnnouncementById", "replaceAnnouncement", "patchAnnouncement", "deleteAnnouncement"], "classes": [], "methods": [{"name": "normalizeForApi(announcement)", "description": "Creates a shallow clone of an announcement object, converting Date objects to ISO strings for API response formatting.", "scope": "", "scopeKind": ""}, {"name": "isNonEmptyString(value)", "description": "Checks if a given value is a non-empty string.", "scope": "", "scopeKind": ""}, {"name": "isOptionalIsoDateString(value)", "description": "Validates if a value is an ISO date string, null, undefined, or empty.", "scope": "", "scopeKind": ""}, {"name": "parseIsoDate(value)", "description": "Parses an ISO date string into a Date object.", "scope": "", "scopeKind": ""}, {"name": "validateAnnouncement(candidate, isPatch)", "description": "Validates the properties of an announcement object against store constraints, including type checks and logical date ordering.", "scope": "", "scopeKind": ""}, {"name": "createAnnouncement(announcement)", "description": "Creates and stores a new announcement record in-memory after validation; ensures id uniqueness.", "scope": "", "scopeKind": ""}, {"name": "listAnnouncements()", "description": "Returns all stored announcements as normalized objects.", "scope": "", "scopeKind": ""}, {"name": "getAnnouncementById(id)", "description": "Retrieves an announcement by its ID, returning it normalized.", "scope": "", "scopeKind": ""}, {"name": "replaceAnnouncement(id, replacement)", "description": "Replaces an existing announcement record entirely, preserving the original creation timestamp.", "scope": "", "scopeKind": ""}, {"name": "patchAnnouncement(id, patch)", "description": "Updates parts of an existing announcement record with validation, preserving creation timestamp.", "scope": "", "scopeKind": ""}, {"name": "deleteAnnouncement(id)", "description": "Deletes an announcement record by ID, returning success status.", "scope": "", "scopeKind": ""}], "calls": ["normalizeForApi", "isNonEmptyString", "isOptionalIsoDateString", "parseIsoDate", "validateAnnouncement"], "search-terms": ["announcementsStore", "in-memory announcements", "announcement validation", "announcement CRUD operations", "ISO date validation", "store validation", "announcement normalization"], "state": 2, "file_id": 39, "knowledge_revision": 154, "git_revision": "06c72ee76f430f86574804c4a36529ec57b00899", "ctags": [{"_type": "tag", "name": "ALLOWED_PRIORITIES", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^  ALLOWED_PRIORITIES,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "ALLOWED_PRIORITIES", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^const ALLOWED_PRIORITIES = new Set(['low', 'normal', 'high']);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "announcementsById", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^const announcementsById = new Map();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "createAnnouncement", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^async function createAnnouncement(announcement) {$/", "language": "JavaScript", "kind": "function", "signature": "(announcement)"}, {"_type": "tag", "name": "deleteAnnouncement", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^async function deleteAnnouncement(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "getAnnouncementById", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^async function getAnnouncementById(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "isNonEmptyString", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^function isNonEmptyString(value) {$/", "language": "JavaScript", "kind": "function", "signature": "(value)"}, {"_type": "tag", "name": "isOptionalIsoDateString", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^function isOptionalIsoDateString(value) {$/", "language": "JavaScript", "kind": "function", "signature": "(value)"}, {"_type": "tag", "name": "listAnnouncements", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^async function listAnnouncements() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "normalizeForApi", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^function normalizeForApi(announcement) {$/", "language": "JavaScript", "kind": "function", "signature": "(announcement)"}, {"_type": "tag", "name": "parseIsoDate", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^function parseIsoDate(value) {$/", "language": "JavaScript", "kind": "function", "signature": "(value)"}, {"_type": "tag", "name": "patchAnnouncement", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^async function patchAnnouncement(id, patch) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, patch)"}, {"_type": "tag", "name": "replaceAnnouncement", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^async function replaceAnnouncement(id, replacement) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, replacement)"}, {"_type": "tag", "name": "validateAnnouncement", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/announcementsStore.js", "pattern": "/^function validateAnnouncement(candidate, isPatch) {$/", "language": "JavaScript", "kind": "function", "signature": "(candidate, isPatch)"}], "hash": "b6df9df989ed9d95f9bcafaac1b79bbb", "format-version": 4, "code-base-name": "api_backend", "filename": "api_backend/src/services/announcementsStore.js", "fields": [{"name": "ALLOWED_PRIORITIES,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"154": "06c72ee76f430f86574804c4a36529ec57b00899"}]}
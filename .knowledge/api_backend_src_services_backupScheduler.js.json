{"is_source_file": true, "format": "JavaScript", "description": "This file implements a backup scheduler service that manages scheduled backups, including enabling/disabling scheduling via environment variables, setting intervals, running backups, and handling job logging. It exports functions to start and stop the backup scheduler.", "external_files": ["../controllers/backup", "./backupJobsStore"], "external_methods": ["backupController.runBackupInternal", "backupJobsStore.addJob"], "published": ["startBackupScheduler", "stopBackupScheduler"], "classes": [], "methods": [{"name": "parseIntEnv(value, fallback)", "description": "Parses an environment variable as a safe integer, with a fallback value.", "scope": "", "scopeKind": ""}, {"name": "isEnabled()", "description": "Checks if scheduled backups are enabled based on environment variable.", "scope": "", "scopeKind": ""}, {"name": "getIntervalMs()", "description": "Determines the interval in milliseconds for scheduled backups, defaulting to 15 minutes.", "scope": "", "scopeKind": ""}, {"name": "runScheduledBackupOnce()", "description": "Executes a single backup run and logs the job status (success or error).", "scope": "", "scopeKind": ""}, {"name": "startBackupScheduler()", "description": "Starts the periodic backup scheduler if enabled and not already running.", "scope": "", "scopeKind": ""}, {"name": "stopBackupScheduler()", "description": "Stops the backup scheduler if it is running.", "scope": "", "scopeKind": ""}], "calls": ["backupController.runBackupInternal", "backupJobsStore.addJob", "setInterval", "clearInterval", "setTimeout", "console.error"], "search-terms": ["backupScheduler", "runBackupInternal", "backupJobsStore", "scheduled backups", "interval environment variable", "backup job logging"], "state": 2, "file_id": 45, "knowledge_revision": 179, "git_revision": "663289ad5f4cc97d35a5aa6d2d0aa87c7db82323", "revision_history": [{"172": "a7e06fc4d5a7289b205b70b7e0e998f2a0f7340c"}, {"179": "663289ad5f4cc97d35a5aa6d2d0aa87c7db82323"}], "ctags": [{"_type": "tag", "name": "backupController", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/backupScheduler.js", "pattern": "/^const backupController = require('..\\/controllers\\/backup');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "backupJobsStore", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/backupScheduler.js", "pattern": "/^const backupJobsStore = require('.\\/backupJobsStore');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "crypto", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/backupScheduler.js", "pattern": "/^const crypto = require('crypto');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getIntervalMs", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/backupScheduler.js", "pattern": "/^function getIntervalMs() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "isEnabled", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/backupScheduler.js", "pattern": "/^function isEnabled() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "parseIntEnv", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/backupScheduler.js", "pattern": "/^function parseIntEnv(value, fallback) {$/", "language": "JavaScript", "kind": "function", "signature": "(value, fallback)"}, {"_type": "tag", "name": "runScheduledBackupOnce", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/backupScheduler.js", "pattern": "/^async function runScheduledBackupOnce() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "startBackupScheduler", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/backupScheduler.js", "pattern": "/^  startBackupScheduler,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "startBackupScheduler", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/backupScheduler.js", "pattern": "/^function startBackupScheduler() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "stopBackupScheduler", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/backupScheduler.js", "pattern": "/^function stopBackupScheduler() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "timer", "path": "/home/kavia/workspace/code-generation/hello-world-api-7161-7170/api_backend/src/services/backupScheduler.js", "pattern": "/^let timer = null;$/", "language": "JavaScript", "kind": "variable"}], "hash": "654edcd4c20589a9f51d1bb6ddad6fe7", "format-version": 4, "code-base-name": "api_backend", "filename": "api_backend/src/services/backupScheduler.js", "fields": [{"name": "startBackupScheduler,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}, {"name": "let timer = null;", "scope": "", "scopeKind": "", "description": "unavailable"}]}